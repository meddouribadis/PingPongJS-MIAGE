<html>
    <head>
        <title>Ping Pong Miage - Badis MEDDOURI</title>
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
        <link rel="stylesheet" href="pong.css">
    </head>
    <body>
    </body>
    <script src="game.js"></script>
    <script src="game.display.js"></script>
    <script src="game.keycode.js"></script>
    <script src="game.control.js"></script>
    <script src="game.ai.js"></script>
    <script src="game.conf.js"></script>

    <script>
        (function () {
            // début du code isolé
            var requestAnimId;

            var initialisation = function() {
                // le code de l'initialisation
                game.init();
                requestAnimId = window.requestAnimationFrame(main); // premier appel de main au rafraîchissement de la page
            };

            var main = function() {
                game.clearLayer(game.playersBallLayer);
                game.movePlayers();
                game.displayPlayers();
                game.moveBall();
                if (game.ball.inGame){
                    game.lostBall();
                }
                game.ai.move();
                game.collideBallWithPlayersAndAction();
                requestAnimId = window.requestAnimationFrame(main); // rappel de main au prochain rafraîchissement de la page
            };

            window.onload = initialisation; // appel de la fonction initialisation au chargement de la page

            // fin du code isolé
        })();
    </script>
    <div id="menu"><input id="startGame" type="button" value="Start Game"></div>
    <div id="divGame"></div>
</html>